#
# Listener for domain <%= @name %>
#
<%= @listen_protocol %>
    Address <%= @listen_ip %>
    Port    <%= @listen_port %>
    <% if @listen_protocol == "ListenHTTPS" %>
    Cert    "<%= @server_cert -%>"
    <% if @ssl_ciphers != "" %>Ciphers "<%= @ssl_ciphers -%>"<% end %>
    <% end %>
    Service
        HeadRequire "<%= @head_require -%>"
<% @backend_ips.each do |this_ip| -%>
        BackEnd
            Address <%= this_ip %>
            Port    <%= @backend_port %>
        End
<% end -%>
        Session
            Type    <%= @session_type %>
            TTL     <%= @session_ttl %>
            <% if @session_id != "" %>ID      "<%= @session_id -%>"<% end %>
        End
    End
End

